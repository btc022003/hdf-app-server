(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[235],{64317:function(Y,M,e){"use strict";var O=e(22122),h=e(28991),v=e(81253),n=e(67294),T=e(10244),g=e(22270),I=e(66758),s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=n.forwardRef(function(t,l){var Z=t.fieldProps,L=t.children,j=t.params,G=t.proFieldProps,B=t.mode,x=t.valueEnum,A=t.request,U=t.showSearch,i=t.options,S=(0,v.Z)(t,s),R=(0,n.useContext)(I.Z);return n.createElement(T.Z,(0,O.Z)({mode:"edit",valueEnum:(0,g.h)(x),request:A,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:i,mode:B,showSearch:U,getPopupContainer:R.getPopupContainer},Z),ref:l,proFieldProps:G},S),L)}),d=n.forwardRef(function(t,l){var Z=t.fieldProps,L=t.children,j=t.params,G=t.proFieldProps,B=t.mode,x=t.valueEnum,A=t.request,U=t.options,i=(0,v.Z)(t,P),S=(0,h.Z)({options:U,mode:B||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Z),R=(0,n.useContext)(I.Z);return n.createElement(T.Z,(0,O.Z)({mode:"edit",valueEnum:(0,g.h)(x),request:A,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:R.getPopupContainer},S),ref:l,proFieldProps:G},i),L)}),a=p,r=d,E=a;E.SearchSelect=r,E.displayName="ProFormComponent",M.Z=E},23080:function(Y,M,e){"use strict";var O=e(85589),h=e.n(O),v=e(85893);function n(T){var g=T.editorState,I=T.setEditorState,s=function(p){I(p)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(h(),{style:{border:"1px solid",borderColor:"rgba(0, 0, 0, 0.5)"},value:g,onChange:function(p){return s(p)}})})}M.Z=n},9321:function(Y,M,e){"use strict";var O=e(9715),h=e(93766),v=e(43185),n=e(94412),T=e(34792),g=e(48086),I=e(2824),s=e(67294),P=e(7085),p=e(49101),d=e(17024),a=e(85893),r=function(t){var l=t.coverImage,Z=t.setCoverImage,L=(0,s.useState)(!1),j=(0,I.Z)(L,2),G=j[0],B=j[1],x=function(S){var R=S.type==="image/jpeg"||S.type==="image/png";R||g.default.error("You can only upload JPG/PNG file!");var N=S.size/1024/1024<2;return N||g.default.error("Image must smaller than 2MB!"),R&&N},A=function(S){if(S.file.status==="uploading"){B(!0);return}S.file.status==="done"&&(Z(S.file.response.data),B(!1))},U=(0,a.jsxs)("div",{children:[G?(0,a.jsx)(P.Z,{}):(0,a.jsx)(p.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.jsx)(h.Z.Item,{label:"\u56FE\u7247",children:(0,a.jsx)(n.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:x,onChange:A,children:l?(0,a.jsx)("img",{src:(0,d.up)(l),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):U})})};M.Z=r},25287:function(Y,M,e){"use strict";e.r(M),e.d(M,{default:function(){return Be}});var O=e(34792),h=e(48086),v=e(49111),n=e(19650),T=e(62350),g=e(75443),I=e(57663),s=e(71577),P=e(11849),p=e(3182),d=e(9715),a=e(93766),r=e(2824),E=e(94043),t=e.n(E),l=e(67265),Z=e(8212),L=e(73171),j=e(49101),G=e(88983),B=e(47933),x=e(22122),A=e(28991),U=e(81253),i=e(67294),S=e(10244),R=e(22270),N=e(64893),ue=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],me=i.forwardRef(function(u,f){var F=u.fieldProps,C=u.options,Q=u.radioType,W=u.layout,K=u.proFieldProps,$=u.valueEnum,w=(0,U.Z)(u,ue);return i.createElement(S.Z,(0,x.Z)({mode:"edit",valueType:Q==="button"?"radioButton":"radio",ref:f,valueEnum:(0,R.h)($,void 0)},w,{fieldProps:(0,A.Z)({options:C,layout:W},F),proFieldProps:K,filedConfig:{customLightMode:!0}}))}),ce=i.forwardRef(function(u,f){var F=u.fieldProps,C=u.children;return i.createElement(B.ZP,(0,x.Z)({},F,{ref:f}),C)}),ve=(0,N.G)(ce,{valuePropName:"checked",ignoreWidth:!0}),J=ve;J.Group=me,J.Button=B.ZP.Button,J.displayName="ProFormComponent";var fe=J,pe=e(952),Ee=e(8890),he=e(5966),ee=e(64317),ge=e(90672),Pe=e(35255),Me=e(85589),te=e.n(Me),Ce=e(23080),b=e(21010);function $e(){return request("/admin/medicine_categories?per=100")}var De=function(){var u=(0,p.Z)(t().mark(function f(F){var C;return t().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,b.WY)("/admin/medicines",{method:"get",params:{page:F.current,name:F.name}});case 2:return C=W.sent,console.log(C),W.abrupt("return",new Promise(function(K){K({data:C.list,success:!0,total:C.total})}));case 5:case"end":return W.stop()}},f)}));return function(F){return u.apply(this,arguments)}}(),_e=function(f){return(0,b.WY)("/admin/medicines/".concat(f),{method:"GET"})},Oe=function(f){return(0,b.WY)("/admin/medicines",{method:"POST",data:f})},Se=function(f,F){return(0,b.WY)("/admin/medicines/".concat(f),{method:"PATCH",data:F})},Te=function(f){return(0,b.WY)("/admin/medicines/".concat(f),{method:"DELETE"})},Ie=e(6065),ye=e(92264),Ze=e(9321),Fe=e(17024),o=e(85893);function We(){var u=(0,i.useState)(!1),f=(0,r.Z)(u,2),F=f[0],C=f[1],Q=(0,i.useState)(""),W=(0,r.Z)(Q,2),K=W[0],$=W[1],w=(0,i.useState)(""),ae=(0,r.Z)(w,2),ne=ae[0],re=ae[1],V=(0,i.useRef)(),je=a.Z.useForm(),xe=(0,r.Z)(je,1),k=xe[0],Re=(0,i.useState)({}),oe=(0,r.Z)(Re,2),se=oe[0],Le=oe[1],Ae=(0,i.useState)({}),le=(0,r.Z)(Ae,2),Ue=le[0],Ke=le[1],Ye=(0,i.useState)({}),de=(0,r.Z)(Ye,2),ie=de[0],q=de[1];(0,i.useEffect)(function(){(0,Ie.Lp)().then(function(y){var D={};D[0]={text:"\u5168\u90E8"},y.list.forEach(function(m){D[m.id]={text:m.name}}),Le(D)}),(0,ye.Jd)().then(function(y){var D={};y==null||y.forEach(function(m){D[m.id]={text:m.name}}),Ke(D)})},[]);var Ge=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(D,m,_){return(0,o.jsx)(o.Fragment,{children:_+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u4E3B\u56FE",align:"center",hideInSearch:!0,render:function(D,m){return(0,o.jsx)("img",{src:(0,Fe.up)(m.image),style:{width:"80px"}})}},{title:"\u6D4F\u89C8\u6B21\u6570",align:"center",hideInSearch:!0,dataIndex:"views"},{title:"\u5206\u7C7B",align:"center",dataIndex:"category",render:function(D,m){var _;return(0,o.jsx)("p",{children:(_=m.category)===null||_===void 0?void 0:_.name})},filters:!0,onFilter:!0,valueType:"select",valueEnum:se},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(D,m){return(0,o.jsxs)(n.Z,{children:[(0,o.jsx)(s.Z,{onClick:(0,p.Z)(t().mark(function _(){var H,c,X;return t().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e(m.id);case 2:c=z.sent,C(!0),$(c.image),q(te().createEditorState(c.content)),re(c.id),X=(0,P.Z)({},c),delete X.category,k.setFieldsValue((0,P.Z)((0,P.Z)({},X),{},{illnesses:(H=X.illnessMedicine)===null||H===void 0?void 0:H.map(function(be){return be.illnessId}),category:"".concat(m.category?m.category.id:"")}));case 10:case"end":return z.stop()}},_)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,o.jsx)(Z.Z,{})}),(0,o.jsx)(g.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,p.Z)(t().mark(function _(){return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Te(m.id);case 2:V.current&&V.current.reload();case 3:case"end":return c.stop()}},_)})),children:(0,o.jsx)(s.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,o.jsx)(L.Z,{})})})]})}}];return(0,o.jsxs)(l.ZP,{children:[(0,o.jsx)(Pe.ZP,{headerTitle:"\u836F\u54C1",actionRef:V,rowKey:"id",columns:Ge,pagination:{showSizeChanger:!1,pageSize:10},request:De,toolBarRender:function(){return[(0,o.jsxs)(s.Z,{type:"primary",onClick:function(){C(!0),q(te().createEditorState("")),re(""),$(""),k.setFieldsValue({name:"",desc:"",isStanding:!1,medicineCategoryId:"",illnesses:[]})},children:[(0,o.jsx)(j.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,o.jsxs)(Ee.Y,{modalProps:{maskClosable:!1,destroyOnClose:!0},preserve:!1,title:"\u7F16\u8F91",width:"800px",initialValues:{name:"Tom"},form:k,visible:F,onVisibleChange:C,onFinish:function(){var y=(0,p.Z)(t().mark(function D(m){var _;return t().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(console.log(m),_=(0,P.Z)((0,P.Z)({},m),{},{content:ie.toHTML()}),K&&(_.image=K),ne==""){c.next=10;break}return c.next=6,Se(ne,_);case 6:h.default.success("\u4FEE\u6539\u6210\u529F"),C(!1),c.next=14;break;case 10:return c.next=12,Oe(_);case 12:h.default.success("\u65B0\u589E\u6210\u529F"),C(!1);case 14:V.current&&V.current.reload();case 15:case"end":return c.stop()}},D)}));return function(D){return y.apply(this,arguments)}}(),children:[(0,o.jsx)(he.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u5206\u7C7B\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u5B57",width:"md",name:"name"}),(0,o.jsx)(fe.Group,{name:"isStanding",label:"\u662F\u5426\u5E38\u7528\u836F",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]}),(0,o.jsx)(ee.Z,{name:"medicineCategoryId",label:"\u5206\u7C7B",valueEnum:se,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}]}),(0,o.jsx)(ge.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,o.jsx)(ee.Z,{label:"\u5173\u8054\u75BE\u75C5",name:"illnesses",mode:"tags",placeholder:"\u8BF7\u9009\u62E9\u5173\u8054\u75BE\u75C5",valueEnum:Ue}),(0,o.jsx)(Ze.Z,{coverImage:K,setCoverImage:$}),(0,o.jsx)(pe.ZP.Item,{label:"\u8BE6\u60C5",children:(0,o.jsx)(Ce.Z,{editorState:ie,setEditorState:q})})]})]})}var Be=We},92264:function(Y,M,e){"use strict";e.d(M,{e1:function(){return T},Jd:function(){return g},Sf:function(){return I},mS:function(){return s},Ec:function(){return P},Fv:function(){return p}});var O=e(3182),h=e(94043),v=e.n(h),n=e(21010),T=function(){var d=(0,O.Z)(v().mark(function a(r){var E;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,n.WY)("/admin/illnesses",{method:"get",params:{page:r.current,name:r.name}});case 2:return E=l.sent,l.abrupt("return",new Promise(function(Z){Z({data:E.list,success:!0,total:E.total})}));case 4:case"end":return l.stop()}},a)}));return function(r){return d.apply(this,arguments)}}(),g=function(){var d=(0,O.Z)(v().mark(function a(){var r;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.WY)("/admin/illnesses",{method:"get",params:{per:100}});case 2:return r=t.sent,t.abrupt("return",r.list);case 4:case"end":return t.stop()}},a)}));return function(){return d.apply(this,arguments)}}(),I=function(a){return(0,n.WY)("/admin/illnesses/".concat(a),{method:"GET"})},s=function(a){return(0,n.WY)("/admin/illnesses",{method:"POST",data:a})},P=function(a,r){return(0,n.WY)("/admin/illnesses/".concat(a),{method:"PATCH",data:r})},p=function(a){return(0,n.WY)("/admin/illnesses/".concat(a),{method:"DELETE"})}},6065:function(Y,M,e){"use strict";e.d(M,{Lp:function(){return T},e1:function(){return g},Sf:function(){return I},mS:function(){return s},Ec:function(){return P},Fv:function(){return p}});var O=e(3182),h=e(94043),v=e.n(h),n=e(21010);function T(){return(0,n.WY)("/admin/medicine_categories?per=100")}var g=function(){var d=(0,O.Z)(v().mark(function a(r){var E;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,n.WY)("/admin/medicine_categories",{method:"get",params:{page:r.current,name:r.name}});case 2:return E=l.sent,console.log(E),l.abrupt("return",new Promise(function(Z){Z({data:E.list,success:!0,total:E.total})}));case 5:case"end":return l.stop()}},a)}));return function(r){return d.apply(this,arguments)}}(),I=function(a){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"GET"})},s=function(a){return(0,n.WY)("/admin/medicine_categories",{method:"POST",data:a})},P=function(a,r){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"PATCH",data:r})},p=function(a){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"DELETE"})}},17024:function(Y,M,e){"use strict";e.d(M,{up:function(){return g}});var O=e(30381),h=e.n(O);function v(s){sessionStorage.setItem("token",s)}function n(){return sessionStorage.getItem("token")}function T(){sessionStorage.removeItem("token")}function g(s){return s?s.startsWith("http")?s:"".concat("").concat(s):"".concat("","/avatar.jpeg")}function I(s){return moment(s).format("YYYY-MM-DD HH:mm:ss")}}}]);
