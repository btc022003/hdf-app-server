(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[235],{64317:function(V,M,e){"use strict";var T=e(22122),E=e(28991),C=e(81253),n=e(67294),Z=e(10244),h=e(22270),y=e(66758),o=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],c=n.forwardRef(function(t,m){var x=t.fieldProps,U=t.children,W=t.params,G=t.proFieldProps,B=t.mode,j=t.valueEnum,A=t.request,K=t.showSearch,d=t.options,P=(0,C.Z)(t,o),R=(0,n.useContext)(y.Z);return n.createElement(Z.Z,(0,T.Z)({mode:"edit",valueEnum:(0,h.h)(j),request:A,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:d,mode:B,showSearch:K,getPopupContainer:R.getPopupContainer},x),ref:m,proFieldProps:G},P),U)}),F=n.forwardRef(function(t,m){var x=t.fieldProps,U=t.children,W=t.params,G=t.proFieldProps,B=t.mode,j=t.valueEnum,A=t.request,K=t.options,d=(0,C.Z)(t,g),P=(0,E.Z)({options:K,mode:B||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},x),R=(0,n.useContext)(y.Z);return n.createElement(Z.Z,(0,T.Z)({mode:"edit",valueEnum:(0,h.h)(j),request:A,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({getPopupContainer:R.getPopupContainer},P),ref:m,proFieldProps:G},d),U)}),a=c,l=F,D=a;D.SearchSelect=l,D.displayName="ProFormComponent",M.Z=D},23080:function(V,M,e){"use strict";var T=e(85589),E=e.n(T),C=e(85893);function n(Z){var h=Z.editorState,y=Z.setEditorState,o=function(c){y(c)};return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(E(),{style:{border:"1px solid",borderColor:"rgba(0, 0, 0, 0.5)"},value:h,onChange:function(c){return o(c)}})})}M.Z=n},9321:function(V,M,e){"use strict";var T=e(9715),E=e(93766),C=e(43185),n=e(94412),Z=e(34792),h=e(48086),y=e(2824),o=e(67294),g=e(7085),c=e(49101),F=e(17024),a=e(85893),l=function(t){var m=t.coverImage,x=t.setCoverImage,U=(0,o.useState)(!1),W=(0,y.Z)(U,2),G=W[0],B=W[1],j=function(P){var R=P.type==="image/jpeg"||P.type==="image/png";R||h.default.error("You can only upload JPG/PNG file!");var J=P.size/1024/1024<2;return J||h.default.error("Image must smaller than 2MB!"),R&&J},A=function(P){if(P.file.status==="uploading"){B(!0);return}P.file.status==="done"&&(x(P.file.response.data),B(!1))},K=(0,a.jsxs)("div",{children:[G?(0,a.jsx)(g.Z,{}):(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.jsx)(E.Z.Item,{label:"\u56FE\u7247",children:(0,a.jsx)(n.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:j,onChange:A,children:m?(0,a.jsx)("img",{src:(0,F.up)(m),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):K})})};M.Z=l},25287:function(V,M,e){"use strict";e.r(M),e.d(M,{default:function(){return Fe}});var T=e(34792),E=e(48086),C=e(49111),n=e(19650),Z=e(62350),h=e(75443),y=e(57663),o=e(71577),g=e(11849),c=e(3182),F=e(9715),a=e(93766),l=e(2824),D=e(94043),t=e.n(D),m=e(67265),x=e(8212),U=e(73171),W=e(49101),G=e(88983),B=e(47933),j=e(22122),A=e(28991),K=e(81253),d=e(67294),P=e(10244),R=e(22270),J=e(64893),de=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],ie=d.forwardRef(function(s,i){var S=s.fieldProps,v=s.options,X=s.radioType,O=s.layout,Y=s.proFieldProps,H=s.valueEnum,b=(0,K.Z)(s,de);return d.createElement(P.Z,(0,j.Z)({mode:"edit",valueType:X==="button"?"radioButton":"radio",ref:i,valueEnum:(0,R.h)(H,void 0)},b,{fieldProps:(0,A.Z)({options:v,layout:O},S),proFieldProps:Y,filedConfig:{customLightMode:!0}}))}),le=d.forwardRef(function(s,i){var S=s.fieldProps,v=s.children;return d.createElement(B.ZP,(0,j.Z)({},S,{ref:i}),v)}),ue=(0,J.G)(le,{valuePropName:"checked",ignoreWidth:!0}),Q=ue;Q.Group=ie,Q.Button=B.ZP.Button,Q.displayName="ProFormComponent";var me=Q,ce=e(952),ve=e(8890),pe=e(5966),fe=e(64317),Ee=e(90672),he=e(35255),ge=e(85589),q=e.n(ge),Pe=e(23080),$=e(21010);function Ue(){return request("/admin/medicine_categories?per=100")}var Me=function(){var s=(0,c.Z)(t().mark(function i(S){var v;return t().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,$.WY)("/admin/medicines",{method:"get",params:{page:S.current,name:S.name}});case 2:return v=O.sent,console.log(v),O.abrupt("return",new Promise(function(Y){Y({data:v.list,success:!0,total:v.total})}));case 5:case"end":return O.stop()}},i)}));return function(S){return s.apply(this,arguments)}}(),Ce=function(i){return(0,$.WY)("/admin/medicines/".concat(i),{method:"GET"})},De=function(i){return(0,$.WY)("/admin/medicines",{method:"POST",data:i})},Se=function(i,S){return(0,$.WY)("/admin/medicines/".concat(i),{method:"PATCH",data:S})},Oe=function(i){return(0,$.WY)("/admin/medicines/".concat(i),{method:"DELETE"})},Ie=e(6065),Te=e(9321),Ze=e(17024),r=e(85893);function ye(){var s=(0,d.useState)(!1),i=(0,l.Z)(s,2),S=i[0],v=i[1],X=(0,d.useState)(""),O=(0,l.Z)(X,2),Y=O[0],H=O[1],b=(0,d.useState)(""),ee=(0,l.Z)(b,2),te=ee[0],ae=ee[1],z=(0,d.useRef)(),xe=a.Z.useForm(),Be=(0,l.Z)(xe,1),w=Be[0],We=(0,d.useState)({}),re=(0,l.Z)(We,2),ne=re[0],je=re[1],Re=(0,d.useState)({}),oe=(0,l.Z)(Re,2),se=oe[0],k=oe[1];(0,d.useEffect)(function(){(0,Ie.Lp)().then(function(L){var I={};I[0]={text:"\u5168\u90E8"},L.list.forEach(function(p){I[p.id]={text:p.name}}),je(I)})},[]);var Le=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(I,p,f){return(0,r.jsx)(r.Fragment,{children:f+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u4E3B\u56FE",align:"center",hideInSearch:!0,render:function(I,p){return(0,r.jsx)("img",{src:(0,Ze.up)(p.image),style:{width:"80px"}})}},{title:"\u6D4F\u89C8\u6B21\u6570",align:"center",hideInSearch:!0,dataIndex:"views"},{title:"\u5206\u7C7B",align:"center",dataIndex:"category",render:function(I,p){var f;return(0,r.jsx)("p",{children:(f=p.category)===null||f===void 0?void 0:f.name})},filters:!0,onFilter:!0,valueType:"select",valueEnum:ne},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(I,p){return(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(o.Z,{onClick:(0,c.Z)(t().mark(function f(){var _,u;return t().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Ce(p.id);case 2:_=N.sent,v(!0),H(_.image),k(q().createEditorState(_.content)),ae(_.id),u=(0,g.Z)({},_),delete u.category,w.setFieldsValue((0,g.Z)((0,g.Z)({},u),{},{category:"".concat(p.category?p.category.id:"")}));case 10:case"end":return N.stop()}},f)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,r.jsx)(x.Z,{})}),(0,r.jsx)(h.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,c.Z)(t().mark(function f(){return t().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Oe(p.id);case 2:z.current&&z.current.reload();case 3:case"end":return u.stop()}},f)})),children:(0,r.jsx)(o.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,r.jsx)(U.Z,{})})})]})}}];return(0,r.jsxs)(m.ZP,{children:[(0,r.jsx)(he.ZP,{headerTitle:"\u836F\u54C1",actionRef:z,rowKey:"id",columns:Le,pagination:{showSizeChanger:!1,pageSize:10},request:Me,toolBarRender:function(){return[(0,r.jsxs)(o.Z,{type:"primary",onClick:function(){v(!0),k(q().createEditorState("")),ae(""),H(""),w.setFieldsValue({name:"",desc:"",isStanding:!1,medicineCategoryId:""})},children:[(0,r.jsx)(W.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,r.jsxs)(ve.Y,{title:"\u7F16\u8F91",width:"800px",initialValues:{name:"Tom"},form:w,visible:S,onVisibleChange:v,onFinish:function(){var L=(0,c.Z)(t().mark(function I(p){var f;return t().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(f=(0,g.Z)((0,g.Z)({},p),{},{content:se.toHTML()}),Y&&(f.image=Y),te==""){u.next=9;break}return u.next=5,Se(te,f);case 5:E.default.success("\u4FEE\u6539\u6210\u529F"),v(!1),u.next=13;break;case 9:return u.next=11,De(f);case 11:E.default.success("\u65B0\u589E\u6210\u529F"),v(!1);case 13:z.current&&z.current.reload();case 14:case"end":return u.stop()}},I)}));return function(I){return L.apply(this,arguments)}}(),children:[(0,r.jsx)(pe.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u5206\u7C7B\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u5B57",width:"md",name:"name"}),(0,r.jsx)(me.Group,{name:"isStanding",label:"\u662F\u5426\u5E38\u7528\u836F",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]}),(0,r.jsx)(fe.Z,{name:"medicineCategoryId",label:"\u5206\u7C7B",valueEnum:ne,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}]}),(0,r.jsx)(Ee.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,r.jsx)(Te.Z,{coverImage:Y,setCoverImage:H}),(0,r.jsx)(ce.ZP.Item,{label:"\u8BE6\u60C5",children:(0,r.jsx)(Pe.Z,{editorState:se,setEditorState:k})})]})]})}var Fe=ye},6065:function(V,M,e){"use strict";e.d(M,{Lp:function(){return Z},e1:function(){return h},Sf:function(){return y},mS:function(){return o},Ec:function(){return g},Fv:function(){return c}});var T=e(3182),E=e(94043),C=e.n(E),n=e(21010);function Z(){return(0,n.WY)("/admin/medicine_categories?per=100")}var h=function(){var F=(0,T.Z)(C().mark(function a(l){var D;return C().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,n.WY)("/admin/medicine_categories",{method:"get",params:{page:l.current,name:l.name}});case 2:return D=m.sent,console.log(D),m.abrupt("return",new Promise(function(x){x({data:D.list,success:!0,total:D.total})}));case 5:case"end":return m.stop()}},a)}));return function(l){return F.apply(this,arguments)}}(),y=function(a){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"GET"})},o=function(a){return(0,n.WY)("/admin/medicine_categories",{method:"POST",data:a})},g=function(a,l){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"PATCH",data:l})},c=function(a){return(0,n.WY)("/admin/medicine_categories/".concat(a),{method:"DELETE"})}},17024:function(V,M,e){"use strict";e.d(M,{up:function(){return h}});var T=e(30381),E=e.n(T);function C(o){sessionStorage.setItem("token",o)}function n(){return sessionStorage.getItem("token")}function Z(){sessionStorage.removeItem("token")}function h(o){return o?o.startsWith("http")?o:"".concat("").concat(o):"http://oss.penkuoer.com/uPic/ss.jpeg"}function y(o){return moment(o).format("YYYY-MM-DD HH:mm:ss")}}}]);
