(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[371],{23080:function(K,l,e){"use strict";var h=e(85589),E=e.n(h),s=e(85893);function o(O){var c=O.editorState,M=O.setEditorState,_=function(d){M(d)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(E(),{style:{border:"1px solid",borderColor:"rgba(0, 0, 0, 0.5)"},value:c,onChange:function(d){return _(d)}})})}l.Z=o},9321:function(K,l,e){"use strict";var h=e(9715),E=e(93766),s=e(43185),o=e(94412),O=e(34792),c=e(48086),M=e(2824),_=e(67294),D=e(7085),d=e(49101),P=e(17024),t=e(85893),n=function(i){var u=i.coverImage,T=i.setCoverImage,Z=(0,_.useState)(!1),j=(0,M.Z)(Z,2),y=j[0],C=j[1],F=function(f){var S=f.type==="image/jpeg"||f.type==="image/png";S||c.default.error("You can only upload JPG/PNG file!");var x=f.size/1024/1024<2;return x||c.default.error("Image must smaller than 2MB!"),S&&x},b=function(f){if(f.file.status==="uploading"){C(!0);return}f.file.status==="done"&&(T(f.file.response.data),C(!1))},Y=(0,t.jsxs)("div",{children:[y?(0,t.jsx)(D.Z,{}):(0,t.jsx)(d.Z,{}),(0,t.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,t.jsx)(E.Z.Item,{label:"\u56FE\u7247",children:(0,t.jsx)(o.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:F,onChange:b,children:u?(0,t.jsx)("img",{src:(0,P.up)(u),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):Y})})};l.Z=n},40829:function(K,l,e){"use strict";e.r(l);var h=e(34792),E=e(48086),s=e(11849),o=e(49111),O=e(19650),c=e(62350),M=e(75443),_=e(57663),D=e(71577),d=e(3182),P=e(9715),t=e(93766),n=e(2824),p=e(94043),i=e.n(p),u=e(67265),T=e(8212),Z=e(73171),j=e(49101),y=e(8890),C=e(5966),F=e(90672),b=e(952),Y=e(35255),v=e(67294),f=e(85589),S=e.n(f),x=e(23080),U=e(12480),q=e(9321),ee=e(17024),a=e(85893);function ae(){var te=(0,v.useState)(!1),$=(0,n.Z)(te,2),_e=$[0],R=$[1],ne=(0,v.useState)(""),G=(0,n.Z)(ne,2),z=G[0],H=G[1],re=(0,v.useState)(""),J=(0,n.Z)(re,2),N=J[0],Q=J[1],W=(0,v.useRef)(),se=t.Z.useForm(),oe=(0,n.Z)(se,1),V=oe[0],de=(0,v.useState)({}),X=(0,n.Z)(de,2),w=X[0],k=X[1],ue=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(B,g,m){return(0,a.jsx)(a.Fragment,{children:m+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u4E3B\u56FE",align:"center",hideInSearch:!0,render:function(B,g){return(0,a.jsx)("img",{src:(0,ee.up)(g.image),style:{width:"80px"}})}},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0,ellipsis:!0},{title:"\u5730\u5740",align:"center",dataIndex:"address",hideInSearch:!0},{title:"\u7535\u8BDD",align:"center",dataIndex:"phone",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(B,g){return(0,a.jsxs)(O.Z,{children:[(0,a.jsx)(D.Z,{onClick:(0,d.Z)(i().mark(function m(){var I;return i().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,U.Sf)(g.id);case 2:I=A.sent,k(S().createEditorState(I.content)),R(!0),H(I.image),Q(I.id),V.setFieldsValue(I);case 8:case"end":return A.stop()}},m)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,a.jsx)(T.Z,{})}),(0,a.jsx)(M.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,d.Z)(i().mark(function m(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,U.Fv)(g.id);case 2:W.current&&W.current.reload();case 3:case"end":return r.stop()}},m)})),children:(0,a.jsx)(D.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,a.jsx)(Z.Z,{})})})]})}}];return(0,a.jsxs)(u.ZP,{children:[(0,a.jsx)(Y.ZP,{headerTitle:"\u533B\u9662\u4FE1\u606F",actionRef:W,rowKey:"id",columns:ue,pagination:{showSizeChanger:!1,pageSize:10},request:U.e1,toolBarRender:function(){return[(0,a.jsxs)(D.Z,{type:"primary",onClick:function(){R(!0),Q(""),H(""),V.setFieldsValue({name:"",desc:""})},children:[(0,a.jsx)(j.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,a.jsxs)(y.Y,{title:"\u7F16\u8F91",width:"800px",initialValues:{name:"Tom"},form:V,visible:_e,onVisibleChange:R,onFinish:function(){var L=(0,d.Z)(i().mark(function B(g){var m;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(m=(0,s.Z)((0,s.Z)({},g),{},{content:w.toHTML()}),z&&(m.image=z),N==""){r.next=9;break}return r.next=5,(0,U.Ec)(N,m);case 5:E.default.success("\u4FEE\u6539\u6210\u529F"),R(!1),r.next=13;break;case 9:return r.next=11,(0,U.mS)(m);case 11:E.default.success("\u65B0\u589E\u6210\u529F"),R(!1);case 13:W.current&&W.current.reload();case 14:case"end":return r.stop()}},B)}));return function(B){return L.apply(this,arguments)}}(),children:[(0,a.jsx)(C.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u5206\u7C7B\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u5B57",width:"md",name:"name"}),(0,a.jsx)(F.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,a.jsx)(q.Z,{coverImage:z,setCoverImage:H}),(0,a.jsx)(C.Z,{label:"\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",width:"md",name:"address"}),(0,a.jsx)(C.Z,{label:"\u7535\u8BDD",placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD",width:"md",name:"phone"}),(0,a.jsx)(b.ZP.Item,{label:"\u8BE6\u60C5",children:(0,a.jsx)(x.Z,{editorState:w,setEditorState:k})})]})]})}l.default=ae},12480:function(K,l,e){"use strict";e.d(l,{e1:function(){return c},Sf:function(){return M},mS:function(){return _},Ec:function(){return D},Fv:function(){return d}});var h=e(3182),E=e(94043),s=e.n(E),o=e(21010);function O(){return request("/admin/hospitals?per=100")}var c=function(){var P=(0,h.Z)(s().mark(function t(n){var p;return s().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,o.WY)("/admin/hospitals",{method:"get",params:{page:n.current,name:n.name,per:n.pageSize}});case 2:return p=u.sent,console.log(p),u.abrupt("return",new Promise(function(T){T({data:p.list,success:!0,total:p.total})}));case 5:case"end":return u.stop()}},t)}));return function(n){return P.apply(this,arguments)}}(),M=function(t){return(0,o.WY)("/admin/hospitals/".concat(t),{method:"GET"})},_=function(t){return(0,o.WY)("/admin/hospitals",{method:"POST",data:t})},D=function(t,n){return(0,o.WY)("/admin/hospitals/".concat(t),{method:"PATCH",data:n})},d=function(t){return(0,o.WY)("/admin/hospitals/".concat(t),{method:"DELETE"})}},17024:function(K,l,e){"use strict";e.d(l,{up:function(){return c}});var h=e(30381),E=e.n(h);function s(_){sessionStorage.setItem("token",_)}function o(){return sessionStorage.getItem("token")}function O(){sessionStorage.removeItem("token")}function c(_){return _?_.startsWith("http")?_:"".concat("").concat(_):"".concat("","/avatar.jpeg")}function M(_){return moment(_).format("YYYY-MM-DD HH:mm:ss")}}}]);
