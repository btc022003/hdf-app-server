(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[235],{64317:function(b,S,e){"use strict";var y=e(22122),E=e(28991),v=e(81253),r=e(67294),Z=e(10244),C=e(22270),I=e(66758),D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],h=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=r.forwardRef(function(t,s){var T=t.fieldProps,L=t.children,j=t.params,Y=t.proFieldProps,B=t.mode,x=t.valueEnum,A=t.request,U=t.showSearch,i=t.options,O=(0,v.Z)(t,D),R=(0,r.useContext)(I.Z);return r.createElement(Z.Z,(0,y.Z)({mode:"edit",valueEnum:(0,C.h)(x),request:A,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:i,mode:B,showSearch:U,getPopupContainer:R.getPopupContainer},T),ref:s,proFieldProps:Y},O),L)}),d=r.forwardRef(function(t,s){var T=t.fieldProps,L=t.children,j=t.params,Y=t.proFieldProps,B=t.mode,x=t.valueEnum,A=t.request,U=t.options,i=(0,v.Z)(t,h),O=(0,E.Z)({options:U,mode:B||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},T),R=(0,r.useContext)(I.Z);return r.createElement(Z.Z,(0,y.Z)({mode:"edit",valueEnum:(0,C.h)(x),request:A,params:j,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({getPopupContainer:R.getPopupContainer},O),ref:s,proFieldProps:Y},i),L)}),a=p,n=d,f=a;f.SearchSelect=n,f.displayName="ProFormComponent",S.Z=f},23080:function(b,S,e){"use strict";var y=e(85589),E=e.n(y),v=e(85893);function r(Z){var C=Z.editorState,I=Z.setEditorState,D=function(p){I(p)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(E(),{style:{border:"1px solid",borderColor:"rgba(0, 0, 0, 0.5)"},value:C,onChange:function(p){return D(p)}})})}S.Z=r},9321:function(b,S,e){"use strict";var y=e(9715),E=e(93766),v=e(43185),r=e(94412),Z=e(34792),C=e(48086),I=e(2824),D=e(67294),h=e(7085),p=e(49101),d=e(17024),a=e(85893),n=function(t){var s=t.coverImage,T=t.setCoverImage,L=(0,D.useState)(!1),j=(0,I.Z)(L,2),Y=j[0],B=j[1],x=function(O){var R=O.type==="image/jpeg"||O.type==="image/png";R||C.default.error("You can only upload JPG/PNG file!");var N=O.size/1024/1024<2;return N||C.default.error("Image must smaller than 2MB!"),R&&N},A=function(O){if(O.file.status==="uploading"){B(!0);return}O.file.status==="done"&&(T(O.file.response.data),B(!1))},U=(0,a.jsxs)("div",{children:[Y?(0,a.jsx)(h.Z,{}):(0,a.jsx)(p.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.jsx)(E.Z.Item,{label:"\u56FE\u7247",children:(0,a.jsx)(r.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:x,onChange:A,children:s?(0,a.jsx)("img",{src:(0,d.up)(s),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):U})})};S.Z=n},25287:function(b,S,e){"use strict";e.r(S),e.d(S,{default:function(){return Be}});var y=e(34792),E=e(48086),v=e(49111),r=e(19650),Z=e(62350),C=e(75443),I=e(57663),D=e(71577),h=e(11849),p=e(3182),d=e(9715),a=e(93766),n=e(2824),f=e(94043),t=e.n(f),s=e(67265),T=e(8212),L=e(73171),j=e(49101),Y=e(88983),B=e(47933),x=e(22122),A=e(28991),U=e(81253),i=e(67294),O=e(10244),R=e(22270),N=e(64893),ue=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],me=i.forwardRef(function(u,c){var F=u.fieldProps,g=u.options,Q=u.radioType,W=u.layout,K=u.proFieldProps,$=u.valueEnum,k=(0,U.Z)(u,ue);return i.createElement(O.Z,(0,x.Z)({mode:"edit",valueType:Q==="button"?"radioButton":"radio",ref:c,valueEnum:(0,R.h)($,void 0)},k,{fieldProps:(0,A.Z)({options:g,layout:W},F),proFieldProps:K,filedConfig:{customLightMode:!0}}))}),ce=i.forwardRef(function(u,c){var F=u.fieldProps,g=u.children;return i.createElement(B.ZP,(0,x.Z)({},F,{ref:c}),g)}),ve=(0,N.G)(ce,{valuePropName:"checked",ignoreWidth:!0}),J=ve;J.Group=me,J.Button=B.ZP.Button,J.displayName="ProFormComponent";var pe=J,fe=e(952),he=e(8890),Ee=e(5966),ee=e(64317),ge=e(90672),Pe=e(35255),Me=e(85589),te=e.n(Me),Ce=e(23080),G=e(21010);function $e(){return request("/admin/medicine_categories?per=100")}var De=function(){var u=(0,p.Z)(t().mark(function c(F){var g;return t().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,G.WY)("/admin/medicines",{method:"get",params:{page:F.current,name:F.name}});case 2:return g=W.sent,console.log(g),W.abrupt("return",new Promise(function(K){K({data:g.list,success:!0,total:g.total})}));case 5:case"end":return W.stop()}},c)}));return function(F){return u.apply(this,arguments)}}(),Oe=function(c){return(0,G.WY)("/admin/medicines/".concat(c),{method:"GET"})},Se=function(c){return(0,G.WY)("/admin/medicines",{method:"POST",data:c})},_e=function(c,F){return(0,G.WY)("/admin/medicines/".concat(c),{method:"PATCH",data:F})},ye=function(c){return(0,G.WY)("/admin/medicines/".concat(c),{method:"DELETE"})},Ze=e(6065),Ie=e(92264),Te=e(9321),Fe=e(17024),o=e(85893);function We(){var u=(0,i.useState)(!1),c=(0,n.Z)(u,2),F=c[0],g=c[1],Q=(0,i.useState)(""),W=(0,n.Z)(Q,2),K=W[0],$=W[1],k=(0,i.useState)(""),ae=(0,n.Z)(k,2),re=ae[0],ne=ae[1],V=(0,i.useRef)(),je=a.Z.useForm(),xe=(0,n.Z)(je,1),X=xe[0],Re=(0,i.useState)({}),oe=(0,n.Z)(Re,2),se=oe[0],Le=oe[1],Ae=(0,i.useState)({}),le=(0,n.Z)(Ae,2),Ue=le[0],Ke=le[1],Ye=(0,i.useState)({}),de=(0,n.Z)(Ye,2),ie=de[0],q=de[1];(0,i.useEffect)(function(){(0,Ze.Lp)().then(function(_){var P={};P[0]={text:"\u5168\u90E8"},_.list.forEach(function(l){P[l.id]={text:l.name,key:l.id+Math.random()*99999}}),Le(P)}),(0,Ie.Jd)().then(function(_){var P={};_==null||_.forEach(function(l){P[l.id]={text:l.name}}),Ke(P)})},[]);var be=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(P,l,M){return(0,o.jsx)(o.Fragment,{children:M+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u4E3B\u56FE",align:"center",hideInSearch:!0,render:function(P,l){return(0,o.jsx)("img",{src:(0,Fe.up)(l.image),style:{width:"80px"}})}},{title:"\u6D4F\u89C8\u6B21\u6570",align:"center",hideInSearch:!0,dataIndex:"views"},{title:"\u5206\u7C7B",align:"center",dataIndex:"category",render:function(P,l){var M;return(0,o.jsx)("p",{children:(M=l.category)===null||M===void 0?void 0:M.name})},filters:!0,onFilter:!0,valueType:"select",valueEnum:se},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(P,l){return(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(D.Z,{onClick:(0,p.Z)(t().mark(function M(){var z,m,w;return t().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return X.resetFields(),H.next=3,Oe(l.id);case 3:m=H.sent,g(!0),$(m.image),q(te().createEditorState(m.content)),ne(m.id),w=(0,h.Z)({},m),delete w.category,X.setFieldsValue((0,h.Z)((0,h.Z)({},w),{},{illnesses:(z=w.illnessMedicine)===null||z===void 0?void 0:z.map(function(Ge){return Ge.illnessId}),category:"".concat(l.category?l.category.id:"")}));case 11:case"end":return H.stop()}},M)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,o.jsx)(T.Z,{})}),(0,o.jsx)(C.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,p.Z)(t().mark(function M(){return t().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ye(l.id);case 2:V.current&&V.current.reload();case 3:case"end":return m.stop()}},M)})),children:(0,o.jsx)(D.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,o.jsx)(L.Z,{})})})]})}}];return(0,o.jsxs)(s.ZP,{children:[(0,o.jsx)(Pe.ZP,{headerTitle:"\u836F\u54C1",actionRef:V,rowKey:"id",columns:be,pagination:{showSizeChanger:!1,pageSize:10},request:De,toolBarRender:function(){return[(0,o.jsxs)(D.Z,{type:"primary",onClick:function(){g(!0),q(te().createEditorState("")),ne(""),$(""),X.setFieldsValue({name:"",desc:"",isStanding:!1,medicineCategoryId:"",illnesses:[]})},children:[(0,o.jsx)(j.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,o.jsxs)(he.Y,{modalProps:{maskClosable:!1},title:"\u7F16\u8F91",width:"800px",form:X,visible:F,onVisibleChange:g,onFinish:function(){var _=(0,p.Z)(t().mark(function P(l){var M;return t().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(console.log(l),M=(0,h.Z)((0,h.Z)({},l),{},{content:ie.toHTML()}),K&&(M.image=K),re==""){m.next=10;break}return m.next=6,_e(re,M);case 6:E.default.success("\u4FEE\u6539\u6210\u529F"),g(!1),m.next=14;break;case 10:return m.next=12,Se(M);case 12:E.default.success("\u65B0\u589E\u6210\u529F"),g(!1);case 14:V.current&&V.current.reload();case 15:case"end":return m.stop()}},P)}));return function(P){return _.apply(this,arguments)}}(),children:[(0,o.jsx)(Ee.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",width:"md",name:"name"}),(0,o.jsx)(pe.Group,{name:"isStanding",label:"\u662F\u5426\u5E38\u7528\u836F",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]}),(0,o.jsx)(ee.Z,{name:"medicineCategoryId",label:"\u5206\u7C7B",valueEnum:se,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}]}),(0,o.jsx)(ge.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,o.jsx)(ee.Z,{label:"\u5173\u8054\u75BE\u75C5",name:"illnesses",mode:"tags",placeholder:"\u8BF7\u9009\u62E9\u5173\u8054\u75BE\u75C5",valueEnum:Ue}),(0,o.jsx)(Te.Z,{coverImage:K,setCoverImage:$}),(0,o.jsx)(fe.ZP.Item,{label:"\u8BE6\u60C5",children:(0,o.jsx)(Ce.Z,{editorState:ie,setEditorState:q})})]})]})}var Be=We},92264:function(b,S,e){"use strict";e.d(S,{e1:function(){return Z},Jd:function(){return C},Sf:function(){return I},mS:function(){return D},Ec:function(){return h},Fv:function(){return p}});var y=e(3182),E=e(94043),v=e.n(E),r=e(21010),Z=function(){var d=(0,y.Z)(v().mark(function a(n){var f;return v().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,r.WY)("/admin/illnesses",{method:"get",params:{page:n.current,name:n.name}});case 2:return f=s.sent,s.abrupt("return",new Promise(function(T){T({data:f.list,success:!0,total:f.total})}));case 4:case"end":return s.stop()}},a)}));return function(n){return d.apply(this,arguments)}}(),C=function(){var d=(0,y.Z)(v().mark(function a(){var n;return v().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.WY)("/admin/illnesses",{method:"get",params:{per:100}});case 2:return n=t.sent,t.abrupt("return",n.list);case 4:case"end":return t.stop()}},a)}));return function(){return d.apply(this,arguments)}}(),I=function(a){return(0,r.WY)("/admin/illnesses/".concat(a),{method:"GET"})},D=function(a){return(0,r.WY)("/admin/illnesses",{method:"POST",data:a})},h=function(a,n){return(0,r.WY)("/admin/illnesses/".concat(a),{method:"PATCH",data:n})},p=function(a){return(0,r.WY)("/admin/illnesses/".concat(a),{method:"DELETE"})}},6065:function(b,S,e){"use strict";e.d(S,{Lp:function(){return Z},e1:function(){return C},Sf:function(){return I},mS:function(){return D},Ec:function(){return h},Fv:function(){return p}});var y=e(3182),E=e(94043),v=e.n(E),r=e(21010);function Z(){return(0,r.WY)("/admin/medicine_categories?per=100")}var C=function(){var d=(0,y.Z)(v().mark(function a(n){var f;return v().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,r.WY)("/admin/medicine_categories",{method:"get",params:{page:n.current,name:n.name}});case 2:return f=s.sent,console.log(f),s.abrupt("return",new Promise(function(T){T({data:f.list,success:!0,total:f.total})}));case 5:case"end":return s.stop()}},a)}));return function(n){return d.apply(this,arguments)}}(),I=function(a){return(0,r.WY)("/admin/medicine_categories/".concat(a),{method:"GET"})},D=function(a){return(0,r.WY)("/admin/medicine_categories",{method:"POST",data:a})},h=function(a,n){return(0,r.WY)("/admin/medicine_categories/".concat(a),{method:"PATCH",data:n})},p=function(a){return(0,r.WY)("/admin/medicine_categories/".concat(a),{method:"DELETE"})}}}]);
