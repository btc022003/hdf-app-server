(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[945],{64317:function($,y,e){"use strict";var Y=e(22122),g=e(28991),R=e(81253),l=e(67294),z=e(10244),Z=e(22270),B=e(66758),E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=l.forwardRef(function(a,i){var C=a.fieldProps,m=a.children,T=a.params,W=a.proFieldProps,j=a.mode,x=a.valueEnum,_=a.request,L=a.showSearch,A=a.options,c=(0,R.Z)(a,E),F=(0,l.useContext)(B.Z);return l.createElement(z.Z,(0,Y.Z)({mode:"edit",valueEnum:(0,Z.h)(x),request:_,params:T,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:A,mode:j,showSearch:L,getPopupContainer:F.getPopupContainer},C),ref:i,proFieldProps:W},c),m)}),M=l.forwardRef(function(a,i){var C=a.fieldProps,m=a.children,T=a.params,W=a.proFieldProps,j=a.mode,x=a.valueEnum,_=a.request,L=a.options,A=(0,R.Z)(a,P),c=(0,g.Z)({options:L,mode:j||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},C),F=(0,l.useContext)(B.Z);return l.createElement(z.Z,(0,Y.Z)({mode:"edit",valueEnum:(0,Z.h)(x),request:_,params:T,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({getPopupContainer:F.getPopupContainer},c),ref:i,proFieldProps:W},A),m)}),t=p,d=M,f=t;f.SearchSelect=d,f.displayName="ProFormComponent",y.Z=f},9321:function($,y,e){"use strict";var Y=e(9715),g=e(93766),R=e(43185),l=e(94412),z=e(34792),Z=e(48086),B=e(2824),E=e(67294),P=e(7085),p=e(49101),M=e(17024),t=e(85893),d=function(a){var i=a.coverImage,C=a.setCoverImage,m=(0,E.useState)(!1),T=(0,B.Z)(m,2),W=T[0],j=T[1],x=function(c){var F=c.type==="image/jpeg"||c.type==="image/png";F||Z.default.error("You can only upload JPG/PNG file!");var U=c.size/1024/1024<2;return U||Z.default.error("Image must smaller than 2MB!"),F&&U},_=function(c){if(c.file.status==="uploading"){j(!0);return}c.file.status==="done"&&(C(c.file.response.data),j(!1))},L=(0,t.jsxs)("div",{children:[W?(0,t.jsx)(P.Z,{}):(0,t.jsx)(p.Z,{}),(0,t.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,t.jsx)(g.Z.Item,{label:"\u56FE\u7247",children:(0,t.jsx)(l.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:x,onChange:_,children:i?(0,t.jsx)("img",{src:(0,M.up)(i),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):L})})};y.Z=d},76551:function($,y,e){"use strict";e.r(y),e.d(y,{default:function(){return he}});var Y=e(34792),g=e(48086),R=e(49111),l=e(19650),z=e(62350),Z=e(75443),B=e(57663),E=e(71577),P=e(11849),p=e(3182),M=e(9715),t=e(93766),d=e(2824),f=e(94043),a=e.n(f),i=e(67265),C=e(28991),m=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M508 704c79.5 0 144-64.5 144-144s-64.5-144-144-144-144 64.5-144 144 64.5 144 144 144zm0-224c44.2 0 80 35.8 80 80s-35.8 80-80 80-80-35.8-80-80 35.8-80 80-80z"}},{tag:"path",attrs:{d:"M832 256h-28.1l-35.7-120.9c-4-13.7-16.5-23.1-30.7-23.1h-451c-14.3 0-26.8 9.4-30.7 23.1L220.1 256H192c-17.7 0-32 14.3-32 32v28c0 4.4 3.6 8 8 8h45.8l47.7 558.7a32 32 0 0031.9 29.3h429.2a32 32 0 0031.9-29.3L802.2 324H856c4.4 0 8-3.6 8-8v-28c0-17.7-14.3-32-32-32zm-518.6-76h397.2l22.4 76H291l22.4-76zm376.2 664H326.4L282 324h451.9l-44.3 520z"}}]},name:"rest",theme:"outlined"},W=T,j=e(27029),x=function(u,h){return m.createElement(j.Z,(0,C.Z)((0,C.Z)({},u),{},{ref:h,icon:W}))};x.displayName="RestOutlined";var _=m.forwardRef(x),L=e(8212),A=e(73171),c=e(49101),F=e(8890),U=e(5966),ne=e(64317),se=e(35255),V=e(21010);function Ze(){return request("/admin/managers?per=100")}var oe=function(){var I=(0,p.Z)(a().mark(function u(h){var D;return a().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,V.WY)("/admin/managers",{method:"get",params:{page:h.current,userName:h.userName}});case 2:return D=S.sent,console.log(D),S.abrupt("return",new Promise(function(G){G({data:D.list,success:!0,total:D.total})}));case 5:case"end":return S.stop()}},u)}));return function(h){return I.apply(this,arguments)}}(),le=function(u){return(0,V.WY)("/admin/managers/".concat(u),{method:"GET"})},ue=function(u){return(0,V.WY)("/admin/managers",{method:"POST",data:u})},de=function(u,h){return(0,V.WY)("/admin/managers/".concat(u),{method:"PATCH",data:h})},ie=function(u){return(0,V.WY)("/admin/managers/".concat(u),{method:"DELETE"})},me=function(u,h){return(0,V.WY)("/admin/managers/reset_pwd/".concat(u),{method:"PATCH",data:h})},ce=e(62978),ve=e(9321),pe=e(17024),r=e(85893);function fe(){var I=(0,m.useState)(!1),u=(0,d.Z)(I,2),h=u[0],D=u[1],q=(0,m.useState)(!1),S=(0,d.Z)(q,2),G=S[0],b=S[1],ge=(0,m.useState)(""),ee=(0,d.Z)(ge,2),J=ee[0],w=ee[1],Ee=(0,m.useState)(""),ae=(0,d.Z)(Ee,2),Q=ae[0],X=ae[1],H=(0,m.useRef)(),Pe=t.Z.useForm(),Me=(0,d.Z)(Pe,1),k=Me[0],Ce=(0,m.useState)({}),re=(0,d.Z)(Ce,2),te=re[0],De=re[1];(0,m.useEffect)(function(){(0,ce.HM)().then(function(O){var v={};O.list.forEach(function(o){v[o.id]={text:o.name}}),De(v)})},[]);var Oe=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(v,o,s){return(0,r.jsx)(r.Fragment,{children:s+1})}},{title:"\u7528\u6237\u540D",align:"center",dataIndex:"userName"},{title:"\u5934\u50CF",align:"center",hideInSearch:!0,render:function(v,o){return(0,r.jsx)("img",{src:(0,pe.up)(o.avatar),style:{width:"80px"}})}},{title:"\u89D2\u8272",align:"center",render:function(v,o){var s;return console.log(o),(0,r.jsx)(r.Fragment,{children:(s=o.role)===null||s===void 0?void 0:s.name})},filters:!0,onFilter:!0,valueType:"select",valueEnum:te},{title:"\u6635\u79F0",align:"center",dataIndex:"nickName",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(v,o){return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(E.Z,{onClick:(0,p.Z)(a().mark(function s(){var K,n;return a().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,le(o.id);case 2:K=N.sent,D(!0),w(K.avatar),X(K.id),n=(0,P.Z)({},K),delete n.role,k.setFieldsValue((0,P.Z)((0,P.Z)({},n),{},{category:"".concat(o.role?o.role.id:"")}));case 9:case"end":return N.stop()}},s)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(Z.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,p.Z)(a().mark(function s(){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ie(o.id);case 2:H.current&&H.current.reload();case 3:case"end":return n.stop()}},s)})),children:(0,r.jsx)(E.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,r.jsx)(A.Z,{})})}),(0,r.jsx)(E.Z,{size:"small",onClick:function(){b(!0),X(o.id)},title:"\u91CD\u7F6E\u5BC6\u7801",icon:(0,r.jsx)(_,{})})]})}}];return(0,r.jsxs)(i.ZP,{children:[(0,r.jsx)(se.ZP,{headerTitle:"\u836F\u54C1",actionRef:H,rowKey:"id",columns:Oe,pagination:{showSizeChanger:!1,pageSize:10},request:oe,toolBarRender:function(){return[(0,r.jsxs)(E.Z,{type:"primary",onClick:function(){D(!0),X(""),w(""),k.setFieldsValue({name:"",desc:"",isStanding:!1,medicineCategoryId:""})},children:[(0,r.jsx)(c.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,r.jsxs)(F.Y,{title:"\u7F16\u8F91",width:"800px",initialValues:{},form:k,visible:h,onVisibleChange:D,onFinish:function(){var O=(0,p.Z)(a().mark(function v(o){var s;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=(0,P.Z)({},o),J&&(s.avatar=J),Q==""){n.next=9;break}return n.next=5,de(Q,s);case 5:g.default.success("\u4FEE\u6539\u6210\u529F"),D(!1),n.next=13;break;case 9:return n.next=11,ue(s);case 11:g.default.success("\u65B0\u589E\u6210\u529F"),D(!1);case 13:H.current&&H.current.reload();case 14:case"end":return n.stop()}},v)}));return function(v){return O.apply(this,arguments)}}(),children:[(0,r.jsx)(U.Z,{label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",width:"md",name:"userName"}),(0,r.jsx)(U.Z.Password,{label:"\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",width:"md",name:"password"}),(0,r.jsx)(ne.Z,{name:"roleId",label:"\u89D2\u8272",valueEnum:te,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]}),(0,r.jsx)(U.Z,{label:"\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",name:"nickName"}),(0,r.jsx)(ve.Z,{coverImage:J,setCoverImage:w})]}),(0,r.jsx)(F.Y,{title:"\u4FEE\u6539\u5BC6\u7801",onVisibleChange:b,visible:G,onFinish:function(){var O=(0,p.Z)(a().mark(function v(o){var s;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(Q,o);case 2:b(!1),(s=H.current)===null||s===void 0||s.reload();case 4:case"end":return n.stop()}},v)}));return function(v){return O.apply(this,arguments)}}(),children:(0,r.jsx)(U.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",name:"password"})})]})}var he=fe},62978:function($,y,e){"use strict";e.d(y,{HM:function(){return z},e1:function(){return Z},Sf:function(){return B},mS:function(){return E},Ec:function(){return P},Fv:function(){return p}});var Y=e(3182),g=e(94043),R=e.n(g),l=e(21010);function z(){return(0,l.WY)("/admin/roles?per=100")}var Z=function(){var M=(0,Y.Z)(R().mark(function t(d){var f;return R().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,l.WY)("/admin/roles",{method:"get",params:{page:d.current,name:d.name}});case 2:return f=i.sent,console.log(f),i.abrupt("return",new Promise(function(C){C({data:f.list,success:!0,total:f.total})}));case 5:case"end":return i.stop()}},t)}));return function(d){return M.apply(this,arguments)}}(),B=function(t){return(0,l.WY)("/admin/roles/".concat(t),{method:"GET"})},E=function(t){return(0,l.WY)("/admin/roles",{method:"POST",data:t})},P=function(t,d){return(0,l.WY)("/admin/roles/".concat(t),{method:"PATCH",data:d})},p=function(t){return(0,l.WY)("/admin/roles/".concat(t),{method:"DELETE"})}}}]);
