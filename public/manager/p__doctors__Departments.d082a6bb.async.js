(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[270],{90672:function(y,d,e){"use strict";var D=e(22122),c=e(81253),f=e(67294),o=e(10244),_=["fieldProps","proFieldProps"],v=function(a,E){var p=a.fieldProps,u=a.proFieldProps,t=(0,c.Z)(a,_);return f.createElement(o.Z,(0,D.Z)({ref:E,mode:"edit",valueType:"textarea",fieldProps:p,proFieldProps:u},t))};d.Z=f.forwardRef(v)},9321:function(y,d,e){"use strict";var D=e(9715),c=e(93766),f=e(43185),o=e(94412),_=e(34792),v=e(48086),P=e(2824),a=e(67294),E=e(7085),p=e(49101),u=e(17024),t=e(85893),s=function(i){var l=i.coverImage,O=i.setCoverImage,g=(0,a.useState)(!1),A=(0,P.Z)(g,2),K=A[0],U=A[1],W=function(h){var R=h.type==="image/jpeg"||h.type==="image/png";R||v.default.error("You can only upload JPG/PNG file!");var S=h.size/1024/1024<2;return S||v.default.error("Image must smaller than 2MB!"),R&&S},Y=function(h){if(h.file.status==="uploading"){U(!0);return}h.file.status==="done"&&(O(h.file.response.data),U(!1))},H=(0,t.jsxs)("div",{children:[K?(0,t.jsx)(E.Z,{}):(0,t.jsx)(p.Z,{}),(0,t.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,t.jsx)(c.Z.Item,{label:"\u56FE\u7247",children:(0,t.jsx)(o.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"".concat("","/common/upload"),beforeUpload:W,onChange:Y,children:l?(0,t.jsx)("img",{src:(0,u.up)(l),alt:"\u56FE\u7247",style:{maxWidth:"100%",maxHeight:"100%"}}):H})})};d.Z=s},39919:function(y,d,e){"use strict";e.r(d),e.d(d,{default:function(){return ae}});var D=e(34792),c=e(48086),f=e(11849),o=e(49111),_=e(19650),v=e(62350),P=e(75443),a=e(57663),E=e(71577),p=e(3182),u=e(9715),t=e(93766),s=e(2824),M=e(94043),i=e.n(M),l=e(67265),O=e(28991),g=e(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},K=A,U=e(27029),W=function(L,V){return g.createElement(U.Z,(0,O.Z)((0,O.Z)({},L),{},{ref:V,icon:K}))};W.displayName="DeleteFilled";var Y=g.forwardRef(W),H=e(8212),z=e(49101),h=e(8890),R=e(5966),S=e(90672),k=e(35255),F=e(82193),q=e(9321),ee=e(17024),n=e(85893);function te(){var J=(0,g.useState)(!1),L=(0,s.Z)(J,2),V=L[0],B=L[1],ne=(0,g.useState)(""),Q=(0,s.Z)(ne,2),$=Q[0],G=Q[1],re=(0,g.useState)(""),X=(0,s.Z)(re,2),b=X[0],w=X[1],Z=(0,g.useRef)(),se=t.Z.useForm(),oe=(0,s.Z)(se,1),N=oe[0],le=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(C,I,m){return(0,n.jsx)(n.Fragment,{children:m+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u4E3B\u56FE",align:"center",hideInSearch:!0,render:function(C,I){return(0,n.jsx)("img",{src:(0,ee.up)(I.image),style:{width:"80px"}})}},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(C,I){return(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(E.Z,{onClick:(0,p.Z)(i().mark(function m(){var T;return i().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,F.Sf)(I.id);case 2:T=x.sent,B(!0),G(T.image),w(T.id),N.setFieldsValue(T);case 7:case"end":return x.stop()}},m)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,n.jsx)(H.Z,{})}),(0,n.jsx)(P.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,p.Z)(i().mark(function m(){return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,F.Fv)(I.id);case 2:Z.current&&Z.current.reload();case 3:case"end":return r.stop()}},m)})),children:(0,n.jsx)(E.Z,{type:"primary",danger:!0,size:"small",icon:(0,n.jsx)(Y,{})})})]})}}];return(0,n.jsxs)(l.ZP,{children:[(0,n.jsx)(k.ZP,{headerTitle:"\u79D1\u5BA4\u4FE1\u606F",actionRef:Z,rowKey:"id",columns:le,pagination:{showSizeChanger:!1,pageSize:10},request:F.e1,toolBarRender:function(){return[(0,n.jsxs)(E.Z,{type:"primary",onClick:function(){B(!0),w(""),G(""),N.setFieldsValue({name:"",desc:""})},children:[(0,n.jsx)(z.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,n.jsxs)(h.Y,{title:"\u7F16\u8F91",width:"800px",initialValues:{name:"Tom"},form:N,visible:V,onVisibleChange:B,onFinish:function(){var j=(0,p.Z)(i().mark(function C(I){var m;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(m=(0,f.Z)({},I),$&&(m.image=$),b==""){r.next=9;break}return r.next=5,(0,F.Ec)(b,m);case 5:c.default.success("\u4FEE\u6539\u6210\u529F"),B(!1),r.next=13;break;case 9:return r.next=11,(0,F.mS)(m);case 11:c.default.success("\u65B0\u589E\u6210\u529F"),B(!1);case 13:Z.current&&Z.current.reload();case 14:case"end":return r.stop()}},C)}));return function(C){return j.apply(this,arguments)}}(),children:[(0,n.jsx)(R.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u5206\u7C7B\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u5B57",width:"md",name:"name"}),(0,n.jsx)(S.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,n.jsx)(q.Z,{coverImage:$,setCoverImage:G})]})]})}var ae=te},82193:function(y,d,e){"use strict";e.d(d,{e1:function(){return v},Sf:function(){return P},mS:function(){return a},Ec:function(){return E},Fv:function(){return p}});var D=e(3182),c=e(94043),f=e.n(c),o=e(21010);function _(){return request("/admin/departments?per=100")}var v=function(){var u=(0,D.Z)(f().mark(function t(s){var M;return f().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,o.WY)("/admin/departments",{method:"get",params:{page:s.current,name:s.name}});case 2:return M=l.sent,console.log(M),l.abrupt("return",new Promise(function(O){O({data:M.list,success:!0,total:M.total})}));case 5:case"end":return l.stop()}},t)}));return function(s){return u.apply(this,arguments)}}(),P=function(t){return(0,o.WY)("/admin/departments/".concat(t),{method:"GET"})},a=function(t){return(0,o.WY)("/admin/departments",{method:"POST",data:t})},E=function(t,s){return(0,o.WY)("/admin/departments/".concat(t),{method:"PATCH",data:s})},p=function(t){return(0,o.WY)("/admin/departments/".concat(t),{method:"DELETE"})}},17024:function(y,d,e){"use strict";e.d(d,{up:function(){return v}});var D=e(30381),c=e.n(D);function f(a){sessionStorage.setItem("token",a)}function o(){return sessionStorage.getItem("token")}function _(){sessionStorage.removeItem("token")}function v(a){return a?a.startsWith("http")?a:"".concat("").concat(a):"".concat("","/avatar.jpeg")}function P(a){return moment(a).format("YYYY-MM-DD HH:mm:ss")}}}]);
