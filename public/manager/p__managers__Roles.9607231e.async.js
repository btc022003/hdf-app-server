(self.webpackChunkhdf_app_manager=self.webpackChunkhdf_app_manager||[]).push([[152],{63434:function(R,f,e){"use strict";var D=e(63185),P=e(9676),i=e(22122),_=e(28991),M=e(81253),p=e(67294),v=e(10244),u=e(22270),E=e(64893),m=["options","fieldProps","proFieldProps","valueEnum"],t=p.forwardRef(function(s,n){var O=s.options,B=s.fieldProps,U=s.proFieldProps,Z=s.valueEnum,b=(0,M.Z)(s,m);return p.createElement(v.Z,(0,i.Z)({ref:n,valueType:"checkbox",mode:"edit",valueEnum:(0,u.h)(Z,void 0),fieldProps:(0,_.Z)({options:O},B),proFieldProps:U},b))}),r=p.forwardRef(function(s,n){var O=s.fieldProps,B=s.children;return p.createElement(P.Z,(0,i.Z)({ref:n},O),B)}),a=(0,E.G)(r,{valuePropName:"checked"}),d=a;d.Group=t,f.Z=d},90672:function(R,f,e){"use strict";var D=e(22122),P=e(81253),i=e(67294),_=e(10244),M=["fieldProps","proFieldProps"],p=function(u,E){var m=u.fieldProps,t=u.proFieldProps,r=(0,P.Z)(u,M);return i.createElement(_.Z,(0,D.Z)({ref:E,mode:"edit",valueType:"textarea",fieldProps:m,proFieldProps:t},r))};f.Z=i.forwardRef(p)},5966:function(R,f,e){"use strict";var D=e(22122),P=e(81253),i=e(67294),_=e(10244),M=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],v="text",u=function(r){var a=r.fieldProps,d=r.proFieldProps,s=(0,P.Z)(r,M);return i.createElement(_.Z,(0,D.Z)({mode:"edit",valueType:v,fieldProps:a,filedConfig:{valueType:v},proFieldProps:d},s))},E=function(r){var a=r.fieldProps,d=r.proFieldProps,s=(0,P.Z)(r,p);return i.createElement(_.Z,(0,D.Z)({mode:"edit",valueType:"password",fieldProps:a,proFieldProps:d,filedConfig:{valueType:v}},s))},m=u;m.Password=E,m.displayName="ProFormComponent",f.Z=m},45614:function(R,f,e){"use strict";e.r(f);var D=e(34792),P=e(48086),i=e(49111),_=e(19650),M=e(62350),p=e(75443),v=e(57663),u=e(71577),E=e(11849),m=e(3182),t=e(9715),r=e(93766),a=e(2824),d=e(94043),s=e.n(d),n=e(67294),O=e(67265),B=e(8212),U=e(73171),Z=e(49101),b=e(8890),G=e(5966),V=e(90672),z=e(63434),H=e(35255),I=e(62978),N=e(40049),l=e(85893);function J(){var Q=(0,n.useState)(!1),j=(0,a.Z)(Q,2),X=j[0],A=j[1],w=(0,n.useState)(""),y=(0,a.Z)(w,2),x=y[0],S=y[1],g=(0,n.useRef)(),k=r.Z.useForm(),q=(0,a.Z)(k,1),L=q[0],ee=(0,n.useState)({}),Y=(0,a.Z)(ee,2),K=Y[0],re=Y[1];(0,n.useEffect)(function(){(0,N.h_)().then(function(C){re(C.list.map(function(h){return{label:h.name,value:h.id}}))})},[]);var ne=[{title:"\u5E8F\u53F7",align:"center",hideInSearch:!0,render:function(h,T,c){return(0,l.jsx)(l.Fragment,{children:c+1})}},{title:"\u540D\u5B57",align:"center",dataIndex:"name"},{title:"\u63CF\u8FF0",align:"center",dataIndex:"desc",hideInSearch:!0},{title:"\u6743\u9650",align:"center",dataIndex:"desc",hideInSearch:!0,render:function(h,T){var c;return"".concat((c=T.permissionOnRoles)===null||c===void 0?void 0:c.map(function(W){var o;return K==null||(o=K.find(function($){return $.value==W.permissionId}))===null||o===void 0?void 0:o.label}).join(","))}},{title:"\u64CD\u4F5C",align:"center",hideInSearch:!0,render:function(h,T){return(0,l.jsxs)(_.Z,{children:[(0,l.jsx)(u.Z,{onClick:(0,m.Z)(s().mark(function c(){var W,o;return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,I.Sf)(T.id);case 2:o=F.sent,A(!0),S(o.id),L.resetFields(),L.setFieldsValue((0,E.Z)((0,E.Z)({},o),{},{permissions:(W=o.permissionOnRoles)===null||W===void 0?void 0:W.map(function(_e){return _e.permissionId})}));case 7:case"end":return F.stop()}},c)})),type:"primary",size:"small",title:"\u7F16\u8F91",icon:(0,l.jsx)(B.Z,{})}),(0,l.jsx)(p.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",onConfirm:(0,m.Z)(s().mark(function c(){return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,I.Fv)(T.id);case 2:g.current&&g.current.reload();case 3:case"end":return o.stop()}},c)})),children:(0,l.jsx)(u.Z,{type:"primary",danger:!0,size:"small",title:"\u5220\u9664",icon:(0,l.jsx)(U.Z,{})})})]})}}];return(0,l.jsxs)(O.ZP,{children:[(0,l.jsx)(H.ZP,{headerTitle:"\u89D2\u8272\u4FE1\u606F",actionRef:g,rowKey:"id",columns:ne,pagination:{showSizeChanger:!1,pageSize:10},request:I.e1,toolBarRender:function(){return[(0,l.jsxs)(u.Z,{type:"primary",onClick:function(){A(!0),S(""),L.setFieldsValue({name:"",desc:"",permissions:""})},children:[(0,l.jsx)(Z.Z,{}),"\u65B0\u5EFA"]},"primary")]}}),(0,l.jsxs)(b.Y,{title:"\u7F16\u8F91",width:"800px",initialValues:{name:"Tom"},form:L,visible:X,onVisibleChange:A,onFinish:function(){var C=(0,m.Z)(s().mark(function h(T){var c;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(c=(0,E.Z)((0,E.Z)({},T),{},{permissions:T.permissions.join(",")}),x==""){o.next=8;break}return o.next=4,(0,I.Ec)(x,c);case 4:P.default.success("\u4FEE\u6539\u6210\u529F"),A(!1),o.next=12;break;case 8:return o.next=10,(0,I.mS)(c);case 10:P.default.success("\u65B0\u589E\u6210\u529F"),A(!1);case 12:g.current&&g.current.reload();case 13:case"end":return o.stop()}},h)}));return function(h){return C.apply(this,arguments)}}(),children:[(0,l.jsx)(G.Z,{label:"\u540D\u5B57",rules:[{required:!0,message:"\u89D2\u8272\u540D\u5B57\u5FC5\u586B"}],placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",width:"md",name:"name"}),(0,l.jsx)(V.Z,{label:"\u7B80\u4ECB",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",width:"md",name:"desc"}),(0,l.jsx)(z.Z.Group,{label:"\u6743\u9650",name:"permissions",options:K})]})]})}f.default=J},40049:function(R,f,e){"use strict";e.d(f,{h_:function(){return M},e1:function(){return p},Sf:function(){return v},mS:function(){return u},Ec:function(){return E},Fv:function(){return m}});var D=e(3182),P=e(94043),i=e.n(P),_=e(21010);function M(){return(0,_.WY)("/admin/permissions?per=100")}var p=function(){var t=(0,D.Z)(i().mark(function r(a){var d;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.WY)("/admin/permissions",{method:"get",params:{page:a.current,name:a.name}});case 2:return d=n.sent,console.log(d),n.abrupt("return",new Promise(function(O){O({data:d.list,success:!0,total:d.total})}));case 5:case"end":return n.stop()}},r)}));return function(a){return t.apply(this,arguments)}}(),v=function(r){return(0,_.WY)("/admin/permissions/".concat(r),{method:"GET"})},u=function(r){return(0,_.WY)("/admin/permissions",{method:"POST",data:r})},E=function(r,a){return(0,_.WY)("/admin/permissions/".concat(r),{method:"PATCH",data:a})},m=function(r){return(0,_.WY)("/admin/permissions/".concat(r),{method:"DELETE"})}},62978:function(R,f,e){"use strict";e.d(f,{HM:function(){return M},e1:function(){return p},Sf:function(){return v},mS:function(){return u},Ec:function(){return E},Fv:function(){return m}});var D=e(3182),P=e(94043),i=e.n(P),_=e(21010);function M(){return(0,_.WY)("/admin/roles?per=100")}var p=function(){var t=(0,D.Z)(i().mark(function r(a){var d;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.WY)("/admin/roles",{method:"get",params:{page:a.current,name:a.name}});case 2:return d=n.sent,console.log(d),n.abrupt("return",new Promise(function(O){O({data:d.list,success:!0,total:d.total})}));case 5:case"end":return n.stop()}},r)}));return function(a){return t.apply(this,arguments)}}(),v=function(r){return(0,_.WY)("/admin/roles/".concat(r),{method:"GET"})},u=function(r){return(0,_.WY)("/admin/roles",{method:"POST",data:r})},E=function(r,a){return(0,_.WY)("/admin/roles/".concat(r),{method:"PATCH",data:a})},m=function(r){return(0,_.WY)("/admin/roles/".concat(r),{method:"DELETE"})}}}]);
